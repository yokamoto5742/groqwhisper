# 音声入力メモアプリ GroqWhisper

## 概要
このアプリケーションは、音声入力を利用してテキストメモを作成するための便利なツールです。音声をリアルタイムで文字起こしした文章を、指定の場所に貼り付けることができます。

## 主な機能
- 音声入力によるテキスト生成
- テキストの自動クリップボードコピーと貼り付け
- 句読点の有無を切り替え可能
- キーボードショートカットによる操作
- 自動停止タイマー
- テキスト置換機能
- クリップボード履歴表示
- 通知システム
- 音声ファイルの一時保存と自動クリーンアップ

## 必要条件
- Python 3.11以上
- 必要なライブラリ：pyaudio, pyperclip, tkinter, keyboard, pyautogui, groq
- Windows OS（Windows機能に依存する部分があります）

## インストール方法
1. リポジトリをクローンまたはダウンロードします。
2. 必要なライブラリをインストールします：
   ```
   pip install -r requirements.txt
   ```
3. Groq APIキーを環境変数にセットします：
   ```
   set GROQ_API_KEY=your_api_key_here
   ```

## 使用方法
1. アプリケーションを起動します：
   ```
   python main.py
   ```
2. 「音声入力開始」ボタンをクリックするか、設定されたショートカットキー（デフォルトは pause キー）を押して録音を開始します。
3. 話し終わったら、再度ボタンをクリックするかショートカットキーを押して録音を停止します。
4. 文字起こしされたテキストが自動的にクリップボードにコピーされ、アクティブなウィンドウに貼り付けられます。

## 設定
`config.ini`ファイルで以下の設定を変更できます：

### [AUDIO]
- `sample_rate`: サンプルレート（Hz）
- `channels`: チャンネル数
- `chunk`: チャンクサイズ

### [WHISPER]
- `model`: 使用する言語モデル
- `language`: 認識言語
- `prompt`: 認識精度を向上させるためのプロンプト
- `use_punctuation`: 句点使用の有無（True/False）
- `use_comma`: 読点使用の有無（True/False）

### [WINDOW]
- `width`: ウィンドウの幅
- `height`: ウィンドウの高さ

### [EDITOR]
- `width`: エディタウィンドウの幅
- `height`: エディタウィンドウの高さ
- `font_name`: フォント名
- `font_size`: フォントサイズ

### [CLIPBOARD]
- `paste_delay`: テキスト貼り付け遅延時間（秒）

### [OPTIONS]
- `start_minimized`: 起動時に最小化するかどうか（True/False）

### [KEYS]
- `toggle_recording`: 録音開始/停止のショートカットキー
- `exit_app`: アプリ終了のショートカットキー
- `reload_audio`: 音声再読込のショートカットキー
- `toggle_punctuation`: 句読点切り替えのショートカットキー

### [RECORDING]
- `auto_stop_timer`: 自動停止までの時間（秒）

### [LOGGING]
- `log_retention_days`: ログの保持日数
- `log_directory`: ログディレクトリ

### [PATHS]
- `replacements_file`: テキスト置換設定ファイルのパス
- `temp_dir`: 一時ファイル保存ディレクトリ
- `cleanup_minutes`: 一時ファイルの保持時間（分）

## 特徴的な機能

### 自動停止タイマー
AUTO_STOP_TIMER は、音声入力の自動停止を制御する機能です：

1. 自動停止のタイミング設定：
   - このタイマーは、音声入力が開始されてから自動的に停止するまでの時間を秒単位で指定します。
   - 例：AUTO_STOP_TIMER = 60 と設定すると、音声入力は60秒後に自動的に停止します。

2. 長時間の誤録音防止：
   - ユーザーが録音停止を忘れた場合や、誤って長時間録音してしまうのを防ぎます。
   - 不要な音声データの処理を避け、システムリソースを節約します。

3. ユーザーへの通知：
   - 自動停止の5秒前にユーザーに通知を表示します。

### テキスト置換機能
アプリケーション内でテキスト置換ルールを編集・管理できます：

1. 「テキスト置換登録」ボタンをクリックして置換エディタを開きます。
2. 各行に「置換前,置換後」の形式でルールを入力します。
3. 保存すると、以降の文字起こし結果に自動的に適用されます。

### クリップボード履歴
Windowsのクリップボード履歴機能を直接呼び出すことができます：

1. 「クリップボード履歴」ボタンをクリックすると、Windowsのクリップボード履歴が表示されます。
2. 過去にコピーしたテキストを簡単に再利用できます。

### 音声ファイル管理
録音された音声ファイルは一時的に保存され、自動的にクリーンアップされます：

1. 音声ファイルは設定された一時ディレクトリに保存されます。
2. 「音声再読込」機能を使用して、最後に録音された音声ファイルを再処理できます。
3. 「音声ファイル選択」で過去の録音を選択して再処理することもできます。
4. 設定された時間（デフォルト：240分）が経過すると、古い一時ファイルは自動的に削除されます。

## 注意事項
- 音声認識にはインターネット接続が必要です。
- Groq APIの利用には有効なAPIキーが必要です。
- このアプリケーションはWindows向けに最適化されており、一部の機能はWindows固有のものです。

## ライセンス
このプロジェクトのライセンス情報については、LICENSEファイルを参照してください。
